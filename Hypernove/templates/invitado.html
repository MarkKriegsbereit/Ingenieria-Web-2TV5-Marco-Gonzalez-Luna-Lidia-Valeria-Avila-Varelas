{% extends "base.html" %}

{% block title %}Perfil de Invitado{% endblock %}

{% block content %}

<style>
    /* Estilos del Panel Invitado */
    .guest-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 30px;
        margin-top: 30px;
    }

    .card-box {
        background-color: rgba(26, 26, 26, 0.95);
        border: 1px solid #8A2BE2;
        border-radius: 15px;
        padding: 2rem;
        width: 100%;
        max-width: 450px;
        box-shadow: 0 0 20px rgba(138, 43, 226, 0.15);
    }

    .card-header {
        border-bottom: 1px solid #444;
        padding-bottom: 15px;
        margin-bottom: 20px;
        text-align: center;
    }

    h3 { color: #8A2BE2; font-family: 'Orbitron', sans-serif; margin: 0; }
    p { color: #ccc; font-size: 0.9rem; margin-top: 5px; }

    /* Inputs */
    .form-group { margin-bottom: 15px; text-align: left; }
    label { display: block; color: #aaa; margin-bottom: 5px; font-size: 0.9rem; }
    input {
        width: 100%; padding: 10px;
        background: #111; border: 1px solid #555;
        color: white; border-radius: 5px;
        font-family: 'Roboto', sans-serif;
    }
    input:focus { border-color: #8A2BE2; outline: none; }

    /* Botones */
    .btn-save {
        width: 100%; padding: 12px;
        background: linear-gradient(45deg, #8A2BE2, #4B0082);
        color: white; border: none; border-radius: 5px;
        font-family: 'Orbitron', sans-serif; cursor: pointer;
        transition: 0.3s; margin-top: 10px;
    }
    .btn-save:hover { filter: brightness(1.2); }

    .btn-go {
        display: block; width: 100%; padding: 15px;
        background: transparent; border: 2px solid #00ffcc;
        color: #00ffcc; text-align: center;
        font-family: 'Orbitron', sans-serif; text-decoration: none;
        border-radius: 50px; transition: 0.3s;
        margin-top: 20px;
    }
    .btn-go:hover { background: #00ffcc; color: black; box-shadow: 0 0 20px #00ffcc; }
</style>

<div style="text-align: center; margin-bottom: 20px;">
    <h1 style="font-family: 'Orbitron'; color: white;">BIENVENIDO, {{ usuario.Nombre.upper() }}</h1>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div style="text-align: center; padding: 10px; margin: 0 auto 20px auto; max-width: 500px; 
           background: {{ '#28a745' if category == 'success' else '#dc3545' }}; color: white; border-radius: 5px;">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="guest-container">

    <div class="card-box">
        <div class="card-header">
            <h3>MIS DATOS</h3>
            <p>Actualiza tu informaci√≥n de acceso</p>
        </div>
        
        <form method="POST" action="{{ url_for('invitado_dashboard') }}">
            <div class="form-group">
                <label>Nombre</label>
                <input type="text" name="nombre" value="{{ usuario.Nombre }}" required>
            </div>
            <div class="form-group">
                <label>Correo</label>
                <input type="email" name="email" value="{{ usuario.email }}" required>
            </div>
            <div class="form-group">
                <label>Nueva Contrase√±a <small>(Dejar vac√≠o para mantener la actual)</small></label>
                <input type="password" name="password" placeholder="********">
            </div>
            <button type="submit" class="btn-save">GUARDAR CAMBIOS</button>
        </form>
    </div>

    <div class="card-box" style="text-align: center;">
        <div class="card-header">
            <h3 style="color: #00ffcc;">SELECCIONAR TRANSMISI√ìN</h3>
            <p>Selecciona la misi√≥n que quieres ver.</p>
        </div>
        
        <div style="font-size: 4rem; margin: 20px 0;">üöÄ</div>
        <p style="margin-bottom: 20px;">Accede al panel de telemetr√≠a para ver el estado de los veh√≠culos y sensores en vivo.</p>
        
        <a href="{{ url_for('catalogo_misiones') }}" class="btn-go">
            SELECCIONAR TRANSMISI√ìN
        </a>
    </div>

</div>
{% endblock %}